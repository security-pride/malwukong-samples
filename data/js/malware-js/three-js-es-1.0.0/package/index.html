<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¸­æ–‡ä»£ç ç©3D</title>
    <style>
        body {
            margin: 0;
        }

        #code {
            display: none;
        }
    </style>
    <script async src="/es-module-shims/dist/es-module-shims.js"></script>
    <script type="importmap">
        {
        "imports": {
          "three": "/three/build/three.module.js",
          "three/addons/": "/three/examples/jsm/",
          "three/examples/jsm/": "/three/examples/jsm/"
        }
      }
    </script>
</head>

<body>
    <script id="æˆ‘çš„åœºæ™¯" type="domElement">
        <åœºæ™¯>
          <é€è§†æ‘„åƒæœº è§†é‡è§’åº¦="50" é•¿å®½æ¯”="è‡ªé€‚åº”" æœ€å°å¯è§†èŒƒå›´="0.1" æœ€å¤§å¯è§†èŒƒå›´="2000" />
          <æ§åˆ¶å™¨ ç±»å‹="è½¨é“">
              <å‚æ•° ç±»å‹="ä½ç½®" x="0" y="4" z="20" />
              <å‚æ•° ç±»å‹="èšç„¦" x="0" y="4" z="0" />
          </æ§åˆ¶å™¨>
          <!-- <å…¨æ™¯è§†é¢‘  è·¯å¾„="/demo.mp4"  å¾ªç¯="true"  é™éŸ³="false"  è‡ªåŠ¨æ’­æ”¾="true" /> -->
          <å…¨æ™¯å›¾ç‰‡  è·¯å¾„="/three-js-es@1.0.0/movie.jpg" />
          <!-- <VRé•œå¤´ /> -->
          <æ–‡å­—ç²¾çµ æ–‡æœ¬="ğŸ¤\nä½ å¥½ï¼Œä¸–ç•Œï¼" å­—ä½“="Arial" å­—å·="30" å­—ä½“é¢œè‰²="#ffffff" å­—ä½“è¾¹æ¡†é¢œè‰²="#000000" 
            å­—ä½“è¾¹æ¡†çº¿å®½="0" å¯¹é½æ–¹å¼="center" èƒŒæ™¯è¾¹æ¡†é¢œè‰²="#ffff0099" èƒŒæ™¯é¢œè‰²="#00ff0000" å­—é—´è·="2"  è¡Œé«˜="40">
            <å‚æ•° ç±»å‹="ä½ç½®" x="0" y="7" z="0" />
          </æ–‡å­—ç²¾çµ>
          <ç‰©ä½“>
              <å‚æ•° ç±»å‹="ä½ç½®" x="-4" y="0" z="0" />
              <å‚æ•° ç±»å‹="æ—‹è½¬" x="0" y="0" z="0" />
              <å‚æ•° ç±»å‹="ç¼©æ”¾" x="1" y="1" z="1" />
              <å‡ ä½•ä½“ å½¢çŠ¶="ç«‹æ–¹ä½“" å®½åº¦="2" é«˜åº¦="2" æ·±åº¦="2" />
              <æè´¨ ç±»å‹="é«˜ç«¯æè´¨" é¢œè‰²="#ff0000" åŒé¢="æ˜¯">
                  <å–å€¼ åç§°="é«˜å…‰åº¦" å€¼="30" />
                  <å–å€¼ åç§°="é•œé¢åå°„" å€¼="#ffffff" />
              </æè´¨>
          </ç‰©ä½“>
          <ç‰©ä½“ åç§°="åœˆåœˆ">
              <å‚æ•° ç±»å‹="ä½ç½®" x="0" y="0" z="0" />
              <å‚æ•° ç±»å‹="æ—‹è½¬" x="0" y="0" z="0" />
              <å‚æ•° ç±»å‹="ç¼©æ”¾" x="1" y="1" z="1" />
              <å‡ ä½•ä½“ å½¢çŠ¶="åœ†å½¢" åŠå¾„="1.5" åˆ†æ®µæ•°="32" />
              <æè´¨ ç±»å‹="æ ‡å‡†" é¢œè‰²="#ffff00" åŒé¢="æ˜¯" />
          </ç‰©ä½“>
          <ç‰©ä½“>
              <å‚æ•° ç±»å‹="ä½ç½®" x="4" y="0" z="0" />
              <å‚æ•° ç±»å‹="æ—‹è½¬" x="0" y="0" z="0" />
              <å‚æ•° ç±»å‹="ç¼©æ”¾" x="1" y="1" z="1" />
              <å‡ ä½•ä½“ å½¢çŠ¶="çƒä½“" åŠå¾„="1" æ¨ªå‘åˆ†æ®µæ•°="32" çºµå‘åˆ†æ®µæ•°="16" />
              <æè´¨ ç±»å‹="é«˜ç«¯æè´¨" é¢œè‰²="#0000ff">
                  <å–å€¼ åç§°="é«˜å…‰åº¦" å€¼="30" />
                  <å–å€¼ åç§°="é•œé¢åå°„" å€¼="#ffffff" />
              </æè´¨>
          </ç‰©ä½“>
          <ç¯å…‰ ç±»å‹="ç¯å¢ƒå…‰" é¢œè‰²="#ffffff" å¼ºåº¦="0.3">
          </ç¯å…‰>
          <ç¯å…‰ ç±»å‹="ç‚¹å…‰æº" é¢œè‰²="#ffffff" å¼ºåº¦="0.5" è·ç¦»="10">
              <å‚æ•° ç±»å‹="ä½ç½®" x="1" y="1" z="1" />
          </ç¯å…‰>
          <æ¨¡å‹ åç§°="å†°å¢©å¢©" è·¯å¾„="/three-js-es@1.0.0/å†°å¢©å¢©.glb">
              <å‚æ•° ç±»å‹="ä½ç½®" x="0" y="3" z="0" />
              <å‚æ•° ç±»å‹="ç¼©æ”¾" x="5" y="5" z="5" />
          </æ¨¡å‹>
          <è‡ªå®šä¹‰å¯¹è±¡ é¢œè‰²="#ff0000">
            <å‚æ•° ç±»å‹="ä½ç½®" x="0" y="0" z="0" />
          </è‡ªå®šä¹‰å¯¹è±¡>
      </åœºæ™¯>
    </script>
    <script type="module">
        import * as THREE from "three";
        import åŠ è½½åœºæ™¯ from "/three-js-es@1.0.0";

        const ç®¡ç† = new åŠ è½½åœºæ™¯("#æˆ‘çš„åœºæ™¯");

        let æ—¶é—´ = 0; // æ—¶é—´å˜é‡ï¼Œç”¨äºå‘¨æœŸæ€§è®¡ç®—å¹³ç§»é‡

        ç®¡ç†.æ›´æ–° = () => {

            const å†°å¢©å¢© = ç®¡ç†.è·å–å¯¹è±¡("å†°å¢©å¢©");
            å†°å¢©å¢©.æ—‹è½¬.y += 0.01;

            const xå‘¨æœŸ = 2; // X ä½ç§»çš„å‘¨æœŸï¼Œå•ä½ä¸ºç§’
            const xæŒ¯å¹… = 1; // X ä½ç§»çš„æŒ¯å¹…
            const xé€Ÿåº¦ = 0.1; // X ä½ç§»çš„é€Ÿåº¦
            const xç§»åŠ¨ = Math.sin(æ—¶é—´ * xé€Ÿåº¦ / xå‘¨æœŸ) * xæŒ¯å¹…;
            å†°å¢©å¢©.ä½ç½®.x = xç§»åŠ¨;

            const åœˆåœˆ = ç®¡ç†.è·å–å¯¹è±¡("åœˆåœˆ");
            åœˆåœˆ.æ—‹è½¬.y += 0.01;

            æ—¶é—´++;

        };

        class CustomObject extends THREE.Object3D {
            constructor(elem) {
                super();
                const color = parseInt(elem.getAttribute("é¢œè‰²") ? elem.getAttribute("é¢œè‰²").replace("#", "") : "#ffffff", 16);
                const geometry = new THREE.SphereGeometry(0.5, 32, 32);
                const material = new THREE.MeshStandardMaterial({
                    color: color,
                    roughness: 0.4,
                    metalness: 0.5
                });
                this.mesh = new THREE.Mesh(geometry, material);
                this.add(this.mesh);
                const transform = { position: new THREE.Vector3() };
                for (const param of [...elem.getElementsByTagName("å‚æ•°")]) {
                    const type = param.getAttribute("ç±»å‹");
                    switch (type) {
                        case "ä½ç½®":
                            transform.position.set(parseFloat(param.getAttribute("x")), parseFloat(param.getAttribute("y")), parseFloat(param.getAttribute("z")));
                            break;
                    }
                }

                const { position } = transform;
                this.position.copy(position);
                return this;
            }
        }

        ç®¡ç†.æ³¨å†Œ("è‡ªå®šä¹‰å¯¹è±¡", "customobject", CustomObject);

        ç®¡ç†.è¿è¡Œ();
    </script>
</body>

</html>